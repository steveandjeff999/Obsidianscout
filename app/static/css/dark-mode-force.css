/* Dark Mode Force Override - Loaded Last to Ensure Precedence */

/* Force all cards to use dark theme with maximum specificity */
body.modern-layout.dark-mode .card,
body.modern-layout.dark-mode .card.shadow-sm,
body.modern-layout.dark-mode .card.shadow,
body.modern-layout.dark-mode .card.border,
body.modern-layout.dark-mode .card.mb-4,
body.modern-layout.dark-mode .card.h-100,
body.modern-layout.dark-mode .dashboard-card,
body.modern-layout.dark-mode .stat-card,
body.modern-layout.dark-mode .stat-card.card-interactive,
body.modern-layout.dark-mode .data-card,
body.modern-layout.dark-mode .team-card,
body.modern-layout.dark-mode .match-card {
    background-color: #2d3338 !important;
    border-color: #444 !important;
    color: #e6e6e6 !important;
}

/* Force stat cards specifically */
body.modern-layout.dark-mode .stat-card,
body.modern-layout.dark-mode .stat-card.card-interactive {
    background-color: #2d3338 !important;
    border-color: #444 !important;
    color: #e6e6e6 !important;
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.3) !important;
}

/* Force stat card components */
body.modern-layout.dark-mode .stat-card .stat-icon,
body.modern-layout.dark-mode .stat-card .stat-icon i {
    color: #e6e6e6 !important;
}

body.modern-layout.dark-mode .stat-card .stat-label {
    color: #b0b0b0 !important;
}

body.modern-layout.dark-mode .stat-card .stat-value {
    color: #e6e6e6 !important;
}

/* Preserve colored stat values but ensure they're visible */
body.modern-layout.dark-mode .stat-card .stat-value.text-primary {
    color: #3d8bfd !important;
}

body.modern-layout.dark-mode .stat-card .stat-value.text-success {
    color: #198754 !important;
}

body.modern-layout.dark-mode .stat-card .stat-value.text-danger {
    color: #dc3545 !important;
}

body.modern-layout.dark-mode .stat-card .stat-value.text-info {
    color: #0dcaf0 !important;
}

body.modern-layout.dark-mode .stat-card .stat-value.text-warning {
    color: #ffc107 !important;
}

/* Force card bodies */
body.modern-layout.dark-mode .card .card-body,
body.modern-layout.dark-mode .card-body {
    background-color: #2d3338 !important;
    color: #e6e6e6 !important;
}

/* Force card headers */
body.modern-layout.dark-mode .card .card-header,
body.modern-layout.dark-mode .card-header {
    background-color: #252a30 !important;
    color: #e6e6e6 !important;
    border-bottom-color: #444 !important;
}

/* Force nested cards */
body.modern-layout.dark-mode .row .card,
body.modern-layout.dark-mode .col-xl-8 .card,
body.modern-layout.dark-mode .col-xl-4 .card,
body.modern-layout.dark-mode .col-md-6 .card,
body.modern-layout.dark-mode .col-md-4 .card,
body.modern-layout.dark-mode div[class*="col"] .card {
    background-color: #2d3338 !important;
    border-color: #444 !important;
    color: #e6e6e6 !important;
}

/* Force nested card bodies */
body.modern-layout.dark-mode .row .card-body,
body.modern-layout.dark-mode .col-xl-8 .card-body,
body.modern-layout.dark-mode .col-xl-4 .card-body,
body.modern-layout.dark-mode .col-md-6 .card-body,
body.modern-layout.dark-mode .col-md-4 .card-body,
body.modern-layout.dark-mode div[class*="col"] .card-body {
    background-color: #2d3338 !important;
    color: #e6e6e6 !important;
}

/* Override Bootstrap utility classes */
body.modern-layout.dark-mode .bg-white,
body.modern-layout.dark-mode .bg-light {
    background-color: #2d3338 !important;
    color: #e6e6e6 !important;
}

body.modern-layout.dark-mode .text-dark {
    color: #e6e6e6 !important;
}

body.modern-layout.dark-mode .text-muted {
    color: #b0b0b0 !important;
}

/* Force list groups */
body.modern-layout.dark-mode .list-group-item {
    background-color: #2d3338 !important;
    color: #e6e6e6 !important;
    border-color: #444 !important;
}

body.modern-layout.dark-mode .list-group-item-action:hover {
    background-color: rgba(255, 255, 255, 0.1) !important;
    color: #e6e6e6 !important;
}

/* Force list group flush items (commonly used in cards) */
body.modern-layout.dark-mode .list-group-flush .list-group-item {
    background-color: #2d3338 !important;
    color: #e6e6e6 !important;
    border-color: #444 !important;
}

body.modern-layout.dark-mode .list-group-flush .list-group-item-action {
    background-color: #2d3338 !important;
    color: #e6e6e6 !important;
}

body.modern-layout.dark-mode .list-group-flush .list-group-item-action:hover,
body.modern-layout.dark-mode .list-group-flush .list-group-item-action:focus {
    background-color: rgba(255, 255, 255, 0.1) !important;
    color: #e6e6e6 !important;
}

/* Force text within list group items */
body.modern-layout.dark-mode .list-group-item .fw-bold,
body.modern-layout.dark-mode .list-group-item .fw-medium {
    color: #e6e6e6 !important;
}

body.modern-layout.dark-mode .list-group-item .text-muted,
body.modern-layout.dark-mode .list-group-item small.text-muted {
    color: #b0b0b0 !important;
}

/* Preserve colored icons within list items */
body.modern-layout.dark-mode .list-group-item .text-primary {
    color: #3d8bfd !important;
}

body.modern-layout.dark-mode .list-group-item .text-success {
    color: #198754 !important;
}

body.modern-layout.dark-mode .list-group-item .text-danger {
    color: #dc3545 !important;
}

body.modern-layout.dark-mode .list-group-item .text-warning {
    color: #ffc107 !important;
}

body.modern-layout.dark-mode .list-group-item .text-info {
    color: #0dcaf0 !important;
}

/* Force alerts */
body.modern-layout.dark-mode .alert {
    background-color: #2d3338 !important;
    color: #e6e6e6 !important;
    border-color: #444 !important;
}

/* Force badges */
body.modern-layout.dark-mode .badge {
    background-color: #2d3338 !important;
    color: #e6e6e6 !important;
    border: 1px solid #444 !important;
}

/* Special handling for colored badges to maintain visibility */
body.modern-layout.dark-mode .badge.bg-primary {
    background-color: #3d8bfd !important;
    color: white !important;
    border-color: #3d8bfd !important;
}

body.modern-layout.dark-mode .badge.bg-success {
    background-color: #198754 !important;
    color: white !important;
    border-color: #198754 !important;
}

body.modern-layout.dark-mode .badge.bg-danger {
    background-color: #dc3545 !important;
    color: white !important;
    border-color: #dc3545 !important;
}

body.modern-layout.dark-mode .badge.bg-warning {
    background-color: #ffc107 !important;
    color: #000 !important;
    border-color: #ffc107 !important;
}

body.modern-layout.dark-mode .badge.bg-info {
    background-color: #0dcaf0 !important;
    color: #000 !important;
    border-color: #0dcaf0 !important;
}

/* Force gradient headers to remain visible */
body.modern-layout.dark-mode .card-header.bg-gradient-primary {
    background: linear-gradient(135deg, #3d8bfd 0%, #0056b3 100%) !important;
    color: white !important;
}

body.modern-layout.dark-mode .card-header.bg-gradient-info {
    background: linear-gradient(135deg, #0dcaf0 0%, #0aa2c0 100%) !important;
    color: white !important;
}

/* Force dropdown buttons within gradient headers */
body.modern-layout.dark-mode .card-header.bg-gradient-primary .btn-light,
body.modern-layout.dark-mode .card-header.bg-gradient-info .btn-light {
    background-color: rgba(255, 255, 255, 0.2) !important;
    border-color: rgba(255, 255, 255, 0.3) !important;
    color: white !important;
}

body.modern-layout.dark-mode .card-header.bg-gradient-primary .btn-light:hover,
body.modern-layout.dark-mode .card-header.bg-gradient-info .btn-light:hover {
    background-color: rgba(255, 255, 255, 0.3) !important;
    border-color: rgba(255, 255, 255, 0.4) !important;
    color: white !important;
}

/* Force dropdown menus */
body.modern-layout.dark-mode .dropdown-menu {
    background-color: #2d3338 !important;
    border-color: #444 !important;
    color: #e6e6e6 !important;
}

body.modern-layout.dark-mode .dropdown-item {
    color: #e6e6e6 !important;
    background-color: transparent !important;
}

body.modern-layout.dark-mode .dropdown-item:hover,
body.modern-layout.dark-mode .dropdown-item:focus {
    background-color: rgba(255, 255, 255, 0.1) !important;
    color: #e6e6e6 !important;
}

body.modern-layout.dark-mode .dropdown-divider {
    border-color: #444 !important;
}

/* Override any inline styles that might force white backgrounds */
body.modern-layout.dark-mode [style*="background-color: white"],
body.modern-layout.dark-mode [style*="background-color: #fff"],
body.modern-layout.dark-mode [style*="background-color: #ffffff"],
body.modern-layout.dark-mode [style*="background: white"],
body.modern-layout.dark-mode [style*="background: #fff"],
body.modern-layout.dark-mode [style*="background: #ffffff"] {
    background-color: #2d3338 !important;
    background: #2d3338 !important;
    color: #e6e6e6 !important;
}

body.modern-layout.dark-mode [style*="color: black"],
body.modern-layout.dark-mode [style*="color: #000"],
body.modern-layout.dark-mode [style*="color: #000000"] {
    color: #e6e6e6 !important;
}

/* Ultra-high specificity overrides for problematic elements */
html body.modern-layout.dark-mode .row .col-sm-6 .stat-card,
html body.modern-layout.dark-mode .row .col-lg-3 .stat-card,
html body.modern-layout.dark-mode .row .stat-card.card-interactive,
html body.modern-layout.dark-mode .col-sm-6 .stat-card,
html body.modern-layout.dark-mode .col-lg-3 .stat-card {
    background-color: #2d3338 !important;
    background-image: none !important;
    background: #2d3338 !important;
    border-color: #444 !important;
    color: #e6e6e6 !important;
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.3) !important;
}

/* Ultra-high specificity for list group items */
html body.modern-layout.dark-mode .card .card-body .list-group-flush .list-group-item,
html body.modern-layout.dark-mode .card-body .list-group-flush .list-group-item,
html body.modern-layout.dark-mode .list-group-flush .list-group-item {
    background-color: #2d3338 !important;
    background-image: none !important;
    background: #2d3338 !important;
    border-color: #444 !important;
    color: #e6e6e6 !important;
}

/* Force text colors with maximum specificity */
html body.modern-layout.dark-mode .stat-card .stat-icon,
html body.modern-layout.dark-mode .stat-card .stat-icon i {
    color: #e6e6e6 !important;
}

html body.modern-layout.dark-mode .stat-card .stat-label {
    color: #b0b0b0 !important;
}

html body.modern-layout.dark-mode .stat-card .stat-value {
    color: #e6e6e6 !important;
}

html body.modern-layout.dark-mode .list-group-item .fw-bold,
html body.modern-layout.dark-mode .list-group-item span.fw-bold {
    color: #e6e6e6 !important;
}

/* Override any gradient backgrounds on stat cards */
html body.modern-layout.dark-mode .stat-card,
html body.modern-layout.dark-mode .stat-card.card-interactive {
    background: #2d3338 !important;
    background-image: none !important;
    background-color: #2d3338 !important;
    border: 1px solid #444 !important;
    color: #e6e6e6 !important;
}

/* Target stat cards in specific column layouts */
html body.modern-layout.dark-mode .row.mb-4.g-3 .stat-card,
html body.modern-layout.dark-mode div[class*="col-"] .stat-card {
    background: #2d3338 !important;
    background-image: none !important;
    background-color: #2d3338 !important;
    border: 1px solid #444 !important;
    color: #e6e6e6 !important;
    padding: 20px !important;
    border-radius: 8px !important;
}

/* Force hover states to work properly */
html body.modern-layout.dark-mode .stat-card:hover,
html body.modern-layout.dark-mode .stat-card.card-interactive:hover {
    background: #3a4147 !important;
    background-image: none !important;
    background-color: #3a4147 !important;
    transform: translateY(-3px) !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5) !important;
}

/* Ensure sidebar brand and section labels are white in dark mode */
body.modern-layout.dark-mode #appSidebar .fw-bold,
body.modern-layout.dark-mode #appSidebar .sidebar-brand,
body.modern-layout.dark-mode #appSidebar .section-label,
html body.modern-layout.dark-mode #appSidebar .section-label {
    color: #ffffff !important;
}

/* Ensure sidebar nav links and muted text are visible */
body.modern-layout.dark-mode #appSidebar .nav-link,
body.modern-layout.dark-mode #appSidebar .nav-link .nav-text,
body.modern-layout.dark-mode #appSidebar .nav-link .text-muted {
    color: #e6e6e6 !important;
}

/* Make info alerts follow dark mode for readability */
body.modern-layout.dark-mode .alert.alert-info,
html body.modern-layout.dark-mode .alert.alert-info {
    background-color: #0b3a44 !important;
    border-color: #1f5660 !important;
    color: #d7f7fb !important;
}

body.modern-layout.dark-mode .alert.alert-info i,
html body.modern-layout.dark-mode .alert.alert-info i {
    color: #9feafc !important;
}

/* Shared error page styles (404/500) */
.site-error-hero {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 24px;
    align-items: center;
    padding: 28px;
}

.site-error-panel {
    background: var(--card-bg, #ffffff) !important;
    border: 1px solid var(--bs-border-color, rgba(0,0,0,0.08)) !important;
    border-radius: 12px !important;
    padding: 28px !important;
    color: var(--bs-body-color, #222) !important;
    box-shadow: 0 8px 28px rgba(2,6,23,0.06) !important;
    background-clip: padding-box !important;
    overflow: hidden !important;
}

.site-error-code {
    font-size: 96px !important;
    line-height: 1 !important;
    font-weight: 700 !important;
    margin: 0 0 8px 0 !important;
    color: var(--bs-body-color, #222) !important;
    opacity: 0.95 !important;
}

.site-error-title { font-size: 22px !important; margin-bottom: 8px !important; font-weight:700 !important; }
.site-error-desc { color: var(--bs-secondary, #6c757d) !important; margin-bottom: 14px !important; }
.site-error-actions { display:flex !important; gap:12px !important; flex-wrap:wrap !important; margin-top:12px !important; }
.site-error-illustration { width:220px; max-width:40vw; }

@media (max-width:720px) {
    .site-error-hero { grid-template-columns: 1fr !important; }
    .site-error-illustration { justify-self:center !important; }
    .site-error-code { font-size:72px !important; }
}

/* Responsive scaling rules so the error hero fits the page gracefully */
.site-error-hero {
    /* use fluid padding and gap that scale with viewport width */
    padding: clamp(12px, 2.6vw, 40px) !important;
    gap: clamp(12px, 2vw, 32px) !important;
}

.site-error-panel {
    /* make font sizes scale smoothly between small and large screens */
    font-size: clamp(0.9rem, 1vw + 0.2rem, 1.05rem) !important;
}

.site-error-code {
    /* scale the big numeric code responsively while keeping it prominent */
    font-size: clamp(48px, 9vw, 120px) !important;
}

.site-error-title { font-size: clamp(18px, 2.2vw, 26px) !important; }
.site-error-desc { font-size: clamp(0.9rem, 1vw, 1.05rem) !important; }

/* Ensure actions compress on narrow screens and buttons wrap nicely */
.site-error-actions { gap:8px !important; justify-content:flex-start !important; }
.site-error-actions .btn { min-width:unset !important; }

@media (max-width:480px) {
    .site-error-illustration { display:none !important; }
    .site-error-code { font-size: clamp(42px, 14vw, 78px) !important; }
    .site-error-panel { padding: 16px !important; }
}

body.modern-layout.dark-mode .alert.alert-info strong,
html body.modern-layout.dark-mode .alert.alert-info strong {
    color: #ffffff !important;
}

body.modern-layout.dark-mode .alert.alert-info a,
html body.modern-layout.dark-mode .alert.alert-info a {
    color: #cdefff !important;
    text-decoration: underline !important;
}

/* Modern semi-transparent card surfaces for a darker, glassy look */
html body.modern-layout.dark-mode .card,
html body.modern-layout.dark-mode .card .card-body,
body.modern-layout.dark-mode .dashboard-card,
body.modern-layout.dark-mode .stat-card,
body.modern-layout.dark-mode .stat-card.card-interactive,
body.modern-layout.dark-mode .data-card,
body.modern-layout.dark-mode .team-card,
body.modern-layout.dark-mode .match-card,
body.modern-layout.dark-mode .list-group-item,
body.modern-layout.dark-mode .dropdown-menu,
body.modern-layout.dark-mode .badge {
    /* slightly darker, semi-transparent surface */
    /* slightly lighter, neutral glass surface so cards sit above the background (no blue tint) */
    background-color: rgba(24, 24, 26, 0.78) !important;
    /* subtle glass blur (works on modern browsers) */
    backdrop-filter: blur(3px) !important;
    -webkit-backdrop-filter: blur(3px) !important;
    /* use a neutral darker border to avoid faint light seams at rounded corners */
    border: 1px solid rgba(0,0,0,0.5) !important;
    /* ensure background does not show seams at the rounded corners */
    background-clip: padding-box !important;
    overflow: hidden !important;
    box-shadow: 0 2px 6px rgba(0,0,0,0.45) !important;
    color: #e6e6e6 !important;
}

/* Card headers slightly darker for contrast and stronger separation */
html body.modern-layout.dark-mode .card-header,
body.modern-layout.dark-mode .card .card-header {
    background-color: rgba(22, 22, 24, 0.76) !important;
    border-bottom-color: rgba(0,0,0,0.45) !important;
    color: #e6e6e6 !important;
}

/* Hover state: lift the surface subtly by brightening background slightly */
html body.modern-layout.dark-mode .card:hover,
html body.modern-layout.dark-mode .stat-card:hover,
html body.modern-layout.dark-mode .list-group-item:hover,
html body.modern-layout.dark-mode .dropdown-item:hover {
    background-color: rgba(30, 30, 32, 0.82) !important;
    transform: translateY(-2px) !important;
}

/* Gradient header accents are preserved (no glass) - no override here so gradients remain intact */

/* Mirror the modern-layout rules for plain .dark-mode body classes so both variants are covered */
html body.dark-mode .card,
html body.dark-mode .card .card-body,
body.dark-mode .dashboard-card,
body.dark-mode .stat-card,
body.dark-mode .stat-card.card-interactive,
body.dark-mode .data-card,
body.dark-mode .team-card,
body.dark-mode .match-card,
body.dark-mode .list-group-item,
body.dark-mode .dropdown-menu,
body.dark-mode .badge {
    background-color: rgba(24, 24, 26, 0.78) !important;
    backdrop-filter: blur(3px) !important;
    -webkit-backdrop-filter: blur(3px) !important;
    border: 1px solid rgba(0,0,0,0.5) !important;
    background-clip: padding-box !important;
    overflow: hidden !important;
    border-color: rgba(255, 255, 255, 0.04) !important;
    box-shadow: 0 1px 0 rgba(0,0,0,0.35) !important;
    color: #e6e6e6 !important;
}

html body.dark-mode .card-header,
body.dark-mode .card .card-header {
    background-color: rgba(22, 22, 24, 0.76) !important;
    border-bottom-color: rgba(0,0,0,0.45) !important;
    color: #e6e6e6 !important;
}

html body.dark-mode .card:hover,
html body.dark-mode .stat-card:hover,
html body.dark-mode .list-group-item:hover,
html body.dark-mode .dropdown-item:hover {
    background-color: rgba(30, 30, 32, 0.82) !important;
    transform: translateY(-2px) !important;
}

/* Gradient header accents are preserved for plain .dark-mode as well */

/* Final override: highest specificity and !important to ensure visual effect */
html body.modern-layout.dark-mode .card, html body.dark-mode .card,
html body.modern-layout.dark-mode .card .card-body, html body.dark-mode .card .card-body,
html body.modern-layout.dark-mode .widget-view-card, html body.dark-mode .widget-view-card,
html body.modern-layout.dark-mode .widget-view-card .card-body, html body.dark-mode .widget-view-card .card-body {
    background-image: none !important;
    background: rgba(10,12,15,0.62) !important;
    background-color: rgba(10,12,15,0.62) !important;
    border-color: rgba(255,255,255,0.04) !important;
    box-shadow: 0 1px 0 rgba(0,0,0,0.35) !important;
    color: #e6e6e6 !important;
}

/* Also force any inline-card background overrides to use the glass color in dark mode */
html body.modern-layout.dark-mode [style*="background-color:"], html body.dark-mode [style*="background-color:"] {
    color: inherit !important;
}

/* Inputs, selects, and search fields - slightly lighter surfaces for contrast */
html body.modern-layout.dark-mode .form-control,
html body.dark-mode .form-control,
html body.modern-layout.dark-mode .form-select,
html body.dark-mode .form-select,
html body.modern-layout.dark-mode .select2-container--default .select2-selection--single,
html body.dark-mode .select2-container--default .select2-selection--single {
    background-color: rgba(255,255,255,0.03) !important;
    border-color: rgba(255,255,255,0.06) !important;
    color: #e6e6e6 !important;
    box-shadow: none !important;
}

html body.modern-layout.dark-mode .select2-container--default .select2-selection--single .select2-selection__rendered,
html body.dark-mode .select2-container--default .select2-selection--single .select2-selection__rendered {
    color: #e6e6e6 !important;
}

/* Select2 dropdown background and border */
html body.modern-layout.dark-mode .select2-container--default .select2-dropdown,
html body.dark-mode .select2-container--default .select2-dropdown {
    background-color: rgba(10,12,15,0.82) !important;
    border-color: rgba(255,255,255,0.06) !important;
    color: #e6e6e6 !important;
}

/* Match the search input wrapper contrast to the new card surface */
html body.modern-layout.dark-mode .search-input-wrapper,
html body.dark-mode .search-input-wrapper {
    background-color: rgba(255,255,255,0.02) !important;
    border-color: rgba(255,255,255,0.06) !important;
}

/* viewer-controls that used .bg-light should be subtle but discernible in dark mode */
html body.modern-layout.dark-mode .viewer-controls.bg-light,
html body.dark-mode .viewer-controls.bg-light {
    background-color: rgba(255,255,255,0.02) !important;
    border-color: rgba(255,255,255,0.04) !important;
    color: #e6e6e6 !important;
}

/* Ensure horizontal rules and thin dividers are visible */
html body.modern-layout.dark-mode .card hr,
html body.dark-mode .card hr,
html body.modern-layout.dark-mode hr,
html body.dark-mode hr {
    border-top-color: rgba(255,255,255,0.04) !important;
}

/* Placeholder color for inputs in dark mode */
html body.modern-layout.dark-mode ::placeholder,
html body.dark-mode ::placeholder {
    color: #9aa0a6 !important;
    opacity: 1 !important;
}

/* Make nested cards, stat-cards and dashboard cards match the neutral card background
   so small panels inside a larger card don't show a different tint. */
html body.modern-layout.dark-mode .card .card,
html body.dark-mode .card .card,
html body.modern-layout.dark-mode .stat-card,
html body.dark-mode .stat-card,
html body.modern-layout.dark-mode .dashboard-card,
html body.dark-mode .dashboard-card {
    background: var(--card-bg) !important;
    background-color: var(--card-bg) !important;
    border: 1px solid rgba(0,0,0,0.45) !important;
    box-shadow: 0 2px 6px rgba(0,0,0,0.45) !important;
    color: #e6e6e6 !important;
    background-clip: padding-box !important;
    overflow: hidden !important;
}





